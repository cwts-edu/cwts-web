---
import Button from "@components/common/Button.astro";
import Container from "@components/common/Container.astro";
import getDegreesWidgetData from "@libs/degrees_widget";
import { type Language, T } from "@libs/language";

export interface Props {
  language: Language;
}

const { language } = Astro.props;
const data = await getDegreesWidgetData(language);

// English title is longer. We can only use one-row layout in xl screen size.
const layoutSwitchClass =
  language === "zh"
    ? {
        topLevelClass: "lg:flex-row",
        titleColClass: "lg:w-[25%]",
      }
    : {
        topLevelClass: "xl:flex-row",
        titleColClass: "xl:w-[25%]",
      };
---

<div class="bg-neutral-100">
  <Container classList={["lg:py-12 py-6"]}>
    <div
      class:list={["flex flex-col", layoutSwitchClass.topLevelClass, "gap-6"]}
    >
      <div
        class:list={[
          "grow-0 shrink-0 font-ui",
          layoutSwitchClass.titleColClass,
        ]}
      >
        <div class="widget-title">{T("programs_degrees", language)}</div>
        <p class="text-4xl leading-snug font-semibold pt-6">
          {T("degree_slogan", language)}
        </p>
      </div>
      <div class="grow flex flex-col gap-4">
        {
          data.map((item) => (
            <div class="rounded-lg border border-neutral-300 p-6 bg-white">
              <div class="text-xl text-darkviolet font-bold mb-3">
                {item.page.data.title}
              </div>
              <div class="prose prose-tabs">
                <item.Content />
              </div>
            </div>
          ))
        }

        <div class="mt-3">
          <Button
            text={T("learn_more", language)}
            url={`/${language}/academic/degrees-programs`}
            classNames={["btn-darkviolet"]}
          />
        </div>
      </div>
    </div>
  </Container>
</div>
